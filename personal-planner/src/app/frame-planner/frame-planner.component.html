<div style="display: flex; flex-direction: column; gap: 1rem;">
  <div style="display: flex; gap: 1rem;">
    <app-range-selector [timeUnit]="'week'" [initialRanges]="[selectedRange()]" (selectionChanged)="onRangeChange($event)"></app-range-selector>
  </div>
  <div style="display: flex; gap: 1rem">
    <div style="border-radius: 4px; border: 1px solid #ddd; flex: 1; min-width: 300px; background: white; padding: 0px 1rem; display: flex; flex-direction: column; overflow-y: auto; max-height: 80vh;">
      <h2>Assigned tasks</h2>
      @for (task of pocketsTasks(); track $index) {
        <app-task-list-item [task]="task"></app-task-list-item>
      }
    </div>
    <div style="border-radius: 4px; border: 1px solid #ddd; width: 100%; background: white; flex: 5; display: grid; grid-template-rows: 1rem auto; gap: 1rem; padding: 0px 1rem; overflow-y: scroll; max-height: 80vh;"
      [style.grid-template-columns]="`2rem repeat(${availablyDaySchedules()?.length ?? 0}, minmax(50px, 1fr))`">
      
      <div style="background: #f0f0f0; grid-row-start: 2; grid-column: 1 / -1; border-radius: 4px; margin: 0px -1rem;"
        [style.height]="displayedFrameHeight()  + 'px'"></div>
      @for (schedules of displayDailyTimeSlots(); track $index; let i = $index) {
        <div style="grid-row: 1;" [style.grid-column]="`${i + 2}`">
          <h2 style="text-align: center;">{{schedules.dayName}}</h2>
        </div>
        @for (slot of schedules.slots; track $index; let j = $index) {
          <div style="grid-row: 2; background: lightgreen; position: relative; border: 1px solid green; border-radius: 4px;" [style.grid-column]="`${i + 2}`"
            [style.top]="slot.top + 'px'" [style.height]="slot.height + 'px'">
          </div>
        }
      }
      @for (marker of timeScaleMarkers(); track $index) {
      <div style="grid-row: 2; grid-column: 1 / -1;">
        <hr style="border-bottom: 1px solid #ccc; position: relative; margin: 0px;" [style.top]="marker.top + 'px'" />
        <p style="text-align: left; position: relative; margin: 0px;" [style.top]="marker.top - 30 + 'px'">{{marker.hour}}h</p>
      </div>
      }
    </div>
  </div>
</div>
